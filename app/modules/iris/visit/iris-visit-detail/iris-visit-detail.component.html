<div *ngIf="!isDesktop" class="d-flex flex-column justify-content-between h-100">
    <div>
        <div class="title" [style.textAlign]="isTablet? 'center': ''" id="title"
            [style.paddingTop]="isTablet? '34px':''">Visit Summary
        </div>
        <!-- step 1 -->
        <div id="step1-title" class="review-step-title">Visit & Subject Information</div>
        <div class="container d-flex text-visit-subject-info row my-4" *ngFor="let item of step1, let i index">
            <div class="visit-subject-title col-5" [id]="'label'+i">{{item.key}}:</div>
            <div class="visit-subject-content col-7" [id]="'value'+i">{{item.value || '-'}}</div>
        </div>

        <!-- step 2 -->
        <div id="step2-title" class="review-step-title">Local Lab</div>
        <div class="container d-flex text-visit-subject-info row my-4" *ngFor="let item of step2, let i index">
            <div class="visit-subject-title col-5" [id]="'label'+i">{{formatSlashText(item.key)}}:</div>
            <div class="visit-subject-content col-7" [id]="'value'+i">{{item.value || '-'}}</div>
        </div>

        <!-- step 3 -->
        <div id="step3-title" class="review-step-title">Capture Report</div>
        <div class="d-flex text-visit-subject-info row my-4" style="padding: 0 12px;">
            <div class="visit-subject-title" [id]="'label-reports*">
                <div class="col-12 col-lg-4">
                    <div class="card wrapper-list-document attached">
                        <div class="card-header bg-gray-2" id="titlelistReports">
                            Attached Redacted Reports
                        </div>

                        <ul class="list-group list-group-flush bg-gray-1" *ngIf="step3">
                            <li class="list-group-item d-flex align-items-center justify-content-between bg-gray-1"
                                *ngFor="let report of step3.reports; let i index">
                                <div class="me-2">
                                    <i class="fas fa-file-pdf text-danger me-2"></i>
                                    <a [id]="'reportLink'+i" [href]="download(report)" download class="report-file">
                                        {{ report.reportFilePath }}
                                    </a>
                                </div>
                            </li>
                            <li class="list-group-item bg-gray-1"
                                *ngFor="let attached Report of step3.attachedReports; let j index">
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-folder text-warning me-2"></i>
                                    <strong>{{ attachedReport.reportPath }}</strong>
                                </div>
                                <ul class="list-unstyled ms-4">
                                    <li *ngfor="let file of attachedReport.files; let k index"
                                        class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-file-pdf text-danger me-2"></i>
                                        <a [id]="'folderFile'+j+'-'+k" [href]="download(file)" download
                                            class="report-file">
                                            {{ file.reportFilePath }}
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <ng-template #empty>
                            <div class="card-body text-muted small bg-gray-1" style="font-size: 14px;"
                                id="emptyMessage">
                                No items in the list.
                            </div>
                        </ng-template>
                    </div>
                </div>
            </div>
        </div>


        <!-- step 4 -->
        <div class="container d-flex text-visit-subject-info row my-4">
            <div class="visit-subject-title col-5" [id]="'labelComment'">Additional Comments: </div>
            <div class="visit-subject-content col-7" [id]="'valueComment'" style="white-space: pre-line;">{{step4
                ||
                '-'}}</div>
        </div>

        <!-- step 5 -->
        <div id="step5-title" class="review-step-title">Additional Information</div>
        <div class="container d-flex text-visit-subject-info row my-4" *ngFor="let item of step5, let i = index">
            <div class="visit-subject-title col-5" [id]="'label'+i">{{item.formattedQuestion}}:</div>
            <div class="visit-subject-content col-7" [id]="'value'+i">{{item.answer || '-'}}</div>
        </div>

    </div>
    <div>
        <app-sub-footer></app-sub-footer>
    </div>

</div>



<!-- Desktop -->
<div *ngIf="isDesktop" class="wrapper-desktop-review" style="padding-left: 0px;">
    <div style="height: 92px; width: 100vw;"
        class="bg-white d-flex align-items-center header-title justify-content-between">
        <div id="title">Visit Summary</div>

        <div style="padding-right: 56px;">
            <app-button text="New Visit" [background]="#128474'" [width]="'180px'" [height]="'44px"
                (onClick)="newVisitIris()" [id]="'btnNewVisit'" />
        </div>
    </div>
    <div class="wrapper-desktop-review">
        <!-- step 1 -->
        <div class="parent-title" id="step1-title">Visit & Subject Information</div>

        <div class="container-list-desktop">
            <div *ngFor="let item of step1, let i index">
                <div [id]="'label'+i" class="title-content" style="padding-bottom: 4px;">{{item.key}}:</div>
                <div [id]="'value'+i" class="value-content">{{ item.value || '-' }}</div>
            </div>
        </div>

        <!-- step 2-->
        <div class="parent-title" id="step2-title">Local Lab</div>
        <div class="container-list-desktop">
            <div *ngFor="let item of step2, let i = index">
                <div [id]="'label'+i" class="title-content" style="padding-bottom: 4px;">{{item.key}}:</div>
                <div [id]="'value'+i" class="value-content">{{ item.value || '-' }}</div>
            </div>
        </div>

        <!-- step 3 -->
        <div class="parent-title" id="step3-title">Capture Report</div>
        <app-folder-tree-view 
            [rootFiles]="step3?.reports" 
            [attachedReports]="step3?.attachedReports">
        </app-folder-tree-view>

        <!-- step 4-->
        <div class="d-flex text-visit-subject-info row">
            <div class="visit-subject-title col-auto" [id]="'labelComment'">Additional Comments:</div>
            <div class="visit-subject-content col" [id]="'valueComment" style="white-space: pre-line;">{{step4 ||
                '-'}}</div>
        </div>

        <!-- step 5 -->
        <div class="parent-title" id="step5-title">Additional Information</div>
        <div class="container-list-desktop">
            <div *ngFor="let item of step5, let i index">
                <div [id]="'label'+i" class="title-content" style="padding-bottom: 4px;">{{item.formattedQuestion}}:
                </div>
                <div [id]="'value'+i" class="value-content">{{ item.answer || '' }}</div>
            </div>
        </div>
    </div>

</div>